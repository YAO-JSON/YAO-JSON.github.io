webpackJsonp([3],{113:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(4);o.n(i),e.default={data:function(){return{selected:{id:0},file:[],pagination:{page:1,pageCount:0,pageSize:0,rowCount:0},showModal:!1}},props:{show:{default:!1},fileUrl:{default:"/home/file/index"}},watch:{show:function(t,e){this.showModal=t,this.selected={id:0},this.showModal&&this.search()}},created:function(){},methods:{selectImage:function(t){if(t.id==this.selected.id)return void(this.selected={id:0});this.selected=t},cancelImage:function(){this.$emit("on-cancel",!0)},selectedImage:function(){this.$emit("on-selected",this.selected)},changePage:function(t){this.pagination.page=t,this.search()},search:function(){var t=this;this.fetch(this.fileUrl+"?page="+this.pagination.page).then(function(e){e&&e.data.data&&(t.file=e.data.data.data,t.pagination=e.data.data.pagination)})},handleAddSuccess:function(t,e){this.search()}}}},117:function(t,e){},118:function(t,e,o){t.exports=o.p+"0be0cab9f6b393db2ed5fd113175edaa.jpg"},119:function(t,e,o){o(117);var i=o(6)(o(113),o(120),null,null);i.options.__file="/Users/yaojiasong/YJSON/boke/vue/pingful-pifa-www/src/components/uploader.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),i.options.functional,t.exports=i.exports},120:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Modal",{attrs:{title:"图片上传管理器",closable:!0,"mask-closable":!1},on:{"on-ok":t.selectedImage,"on-cancel":t.cancelImage},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[o("Row",[o("Col",{attrs:{span:"6"}},[o("Upload",{attrs:{action:t.getUrl("/home/file/add"),"on-success":t.handleAddSuccess,format:["jpg","jpeg","png"],multiple:"",type:"drag","max-size":2048,"show-upload-list":!1,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,headers:t.uploadHeaders()}},[o("div",{staticStyle:{padding:"20px 0"}},[o("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),t._v(" "),o("p",[t._v("点击或将文件拖拽到这里上传")])],1)])],1)],1),t._v(" "),o("hr",{staticStyle:{"margin-top":"20px","border-top":"1px solid #e3e8ee","border-bottom":"0"}}),t._v(" "),o("Row",{staticStyle:{"margin-top":"20px"}},t._l(t.file,function(e,i){return o("Col",{key:i,staticStyle:{"text-align":"center",float:"left"},attrs:{span:4}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getFile(e),expression:"getFile(item)"}],staticStyle:{width:"120px",height:"120px",border:"1px solid #e3e8ee",padding:"3px","border-radius":"3px"},on:{click:function(o){t.selectImage(e)}}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.selected.id==e.id,expression:"selected.id == item.id"}],staticStyle:{"line-height":"128px",position:"absolute",bottom:"0",left:"0",right:"0",background:"rgba(0,0,0,.6)",cursor:"pointer","font-size":"16px"},on:{click:function(o){t.selectImage(e)}}},[o("Icon",{attrs:{type:"checkmark-circled",size:"20",color:"#fff"}}),t._v(" "),o("span",{staticStyle:{color:"#fff"}},[t._v("已选择")])],1)])})),t._v(" "),o("Row",[[o("Page",{staticStyle:{float:"right",margin:"10px"},attrs:{total:t.pagination.rowCount,current:t.pagination.page,"show-elevator":"","page-size":t.pagination.pageSize},on:{"on-change":t.changePage}})]],2)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},173:function(t,e){t.exports="data:image/gif;base64,R0lGODdhyACWAOMAAO/v76qqqubm5t3d3bu7u7KystXV1cPDw8zMzAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAyACWAAAE/hDISau9OOvNu/9gKI5kaZ5oqq5s675wLM90bd94ru987//AoHBILBqPyKRyyWw6n9CodEqtWq/YrHbL7Xq/4LB4TC6bz+i0es1uu9/wuHxOr9vv+Lx+z+/7/4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3TAMFBQO4LAUBAQW+K8DCxCoGu73IzSUCwQECAwQBBAIVCMAFCBrRxwDQwQLKvOHV1xbUwQfYEwIHwO3BBBTawu2BA9HGwcMT1b7Vw/Dt3z563xAIrHCQnzsAAf0F6ybhwDdwgAx8OxDQgASN/sKUBWNmwQDIfwBAThRoMYDHCRYJGAhI8eRMf+4OFrgZgCKgaB4PHqg4EoBQbxgBROtlrJu4ofYm0JMQkJk/mOMkTA10Vas1CcakJrXQ1eu/sF4HWhB3NphYlNsmxOWKsWtZtASTdsVb1mhEu3UDX3RLFyVguITzolQKji/GhgXNvhU7OICgsoflJr7Qd2/isgEPGGAruTTjnSZTXw7c1rJpznobf2Y9GYBjxIsJYQbXstfRDJ1luz6t2TDvosSJSpMw4GXG3TtT+hPpEoPJ6R89B7AaUrnolgWwnUQQEKVOAy199mlonPDfr3m/GeUHFjBhAf0SUh28+P12QOIIgDbcPdwgJV+Arf0jnwTwsHOQT/Hs1BcABObjDAcTXhiCOGppKAJI6nnIwQGiKZSViB2YqB+KHtxjjXMsxijjjDTWaOONOOao44489ujjj0AGKeSQRBZp5JFIJqnkkkw26eSTUEYp5ZRUVmnllVhmqeWWXHbp5ZdghinmmGSW6UsEADs="},261:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(4),a=o.n(i),n=o(119),s=o.n(n);e.default={data:function(){return{self:this,formItem:{name:"",position_type:"",created_at:"",rank:"",url:"",status:!0,imgUrl:""},fileUrl:"",modal:!1,showUploadBox:!1,logoId:"",id:"",adverId:"",adver_link:[{link:"../product/detail/index",text:"商品详情"},{link:"../user/order/index",text:"订单列表"},{link:"../user/coupon/index",text:"优惠券"},{link:"../user/collect/collect",text:"收藏"},{link:"../pay/address/address",text:"收货地址列表"}],model:{title:"商品选择",isOpen:!1,isFirst:!1},productList:[{title:"图片",key:"img",width:140,render:function(t,e,i){var a=o(173);return t.img=a,t.file.id?"<img v-lazy='getFile(row.file)' style='width:80px;height:60px;margin:10px;'>":"<img v-lazy='row.img' style='width:80px;height:60px;margin:10px;'>"}},{title:"名称",key:"name"},{title:"菜单",key:"menu",render:function(t){return t.menu.name||" "}},{title:"价格(元)",key:"price"},{title:"是否推荐",key:"is_recommend",render:function(t){return'<span>{{row.is_recommend ? "是" : "否"}}</span>'}},{title:"商品状态",key:"status",render:function(t){return 0==t.status?"关闭":"开启"}},{title:"销量",key:"sales"}],productData:[],pagination:{},highlightRow:!0,goodsDetailUrl:"",goodId:null,goodInfo:null,formItemRules:{name:[{required:!0,trigger:"blur",message:"请输入广告名称！"},{max:15,trigger:"change",message:"广告名称字数不能超过15字！"}],position_type:[{required:!0,message:"请选择广告分类方式！"}],imgUrl:[{required:!0,message:"请选择广告图片！"}]}}},components:{Uploader:s.a},created:function(){var t=this;this.id=this.$route.query.id,this.$bus.emit("updateMainMenuTitle","广告列表"),this.id&&this.fetch("home/ads/add?id="+this.id).then(function(e){if(1==e.data.code&&e.data.data){var o=e.data.data;if(t.formItem.name=o.name,t.formItem.status=!!o.status,t.formItem.rank=o.rank,t.formItem.created_at=o.created_at,t.formItem.position_type=o.position_type,t.logoId=o.file_id,t.formItem.imgUrl=t.getFile(o.file),-1==o.url.indexOf("?"))t.formItem.url=o.url;else{var i=o.url.indexOf("?");t.formItem.url=o.url.slice(0,i),t.goodsDetailUrl=o.url,t.goodId=o.url.split("id=").pop(),t.model.isFirst=!0,t.model.isOpen=!1}}}),this.fetch("/home/menu/index").then(function(e){e&&e.data.data.length>0&&(t.menuList=e.data.data,t.$nextTick(function(){t.tabId=t.menuList[0].id,t.getProduct()}))})},watch:{goodId:function(t,e){if(t!=e&&t)for(var o=this.productData,i=0;i<o.length;i++)if(o[i].id==t){this.goodInfo=o[i];break}},productData:function(t,e){var o=this.goodId;if(o)for(var i=0;i<t.length;i++)if(t[i].id==o){this.goodInfo=t[i];break}}},methods:{getProduct:function(t){var e=this,o="/home/product/index?category_id="+this.tabId;t&&(o+="&page="+t),this.fetch(o).then(function(t){1==t.data.code&&t.data.data&&(e.productData=t.data.data.data,e.pagination=t.data.data.pagination)})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.$Message.success("验证成功！");var o={id:e.id,position_type:e.formItem.position_type,name:e.formItem.name,file_id:e.logoId,url:e.formItem.url,status:e.formItem.status?1:0,rank:e.formItem.rank,created_at:e.formItem.created_at?e.formItem.created_at:new Date};e.goodsDetailUrl&&(o.url=e.goodsDetailUrl),e.fetch("/home/ads/add",o).then(function(t){e.$router.push("/home/adver/list")})}else e.$Message.error("请输入必填信息！")})},reset:function(t){},switchCahnge:function(t){this.formItem.status=t?1:0},handleSuccess:function(t){this.modal=!0,this.showUploadBox=!1,t.id>0?(this.formItem.imgUrl=this.getFile(t),this.logoId=t.id):this.$Notice.open({title:"请选择图片"})},cancelUpload:function(){this.showUploadBox=!1},handleDel:function(){this.formItem.imgUrl="",this.logoId=""},uploadImg:function(){this.modal=!1,this.showUploadBox=!0,this.fileUrl=a.a.defaults.baseURL+"/home/file/index"},changeLink:function(t){if("../product/detail/index"==t){if(this.model.isFirst)return void(this.model.isFirst=!1);this.model.isOpen=!0}},selectionChange:function(t){var e=this.formItem.url+"?id="+t.id;this.goodId=t.id,this.goodsDetailUrl=e},changePage:function(t){this.getProduct(t)},updateGoodsDetail:function(){this.model.isOpen=!0}}}},558:function(t,e){},585:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Breadcrumb",{staticStyle:{background:"#f8f8f8",padding:"10px 28px"}},[i("Breadcrumb-item",{attrs:{href:"/home/adver/list"}},[t._v("广告列表")]),t._v(" "),i("Breadcrumb-item",[t._v("新增广告")])],1),t._v(" "),i("Modal",{attrs:{title:t.model.title},model:{value:t.model.isOpen,callback:function(e){t.model.isOpen=e},expression:"model.isOpen"}},[t.productData.length>0?i("Table",{attrs:{context:t.self,data:t.productData,columns:t.productList,"highlight-row":t.highlightRow},on:{"on-row-click":t.selectionChange}}):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.productData.length>0,expression:"productData.length>0"}],staticStyle:{margin:"10px 0",overflow:"hidden"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{attrs:{total:t.pagination.rowCount,current:t.pagination.page,"page-size":t.pagination.pageSize},on:{"on-change":t.changePage}})],1)])],1),t._v(" "),i("Form",{ref:"formAdver",staticStyle:{"margin-top":"20px"},attrs:{model:t.formItem,"label-width":100,rules:t.formItemRules}},[i("Form-item",{staticClass:"form-item",attrs:{label:"广告名称：",prop:"name"}},[i("Input",{attrs:{placeholder:"请输入广告名称！"},model:{value:t.formItem.name,callback:function(e){t.formItem.name=e},expression:"formItem.name"}})],1),t._v(" "),i("Form-item",{staticClass:"form-item",attrs:{label:"分类：",prop:"position_type"}},[i("Radio-group",{model:{value:t.formItem.position_type,callback:function(e){t.formItem.position_type=e},expression:"formItem.position_type"}},[i("Radio",{attrs:{label:"1"}},[i("span",[t._v("幻灯片")])]),t._v(" "),i("Radio",{attrs:{label:"2"}},[i("span",[t._v("快捷图标")])])],1)],1),t._v(" "),i("Form-item",{attrs:{label:"图片：",prop:"imgUrl"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!!t.formItem.imgUrl,expression:"formItem.imgUrl?true:false"}],staticClass:"demo-upload-list",staticStyle:{display:"inline-block"}},[[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formItem.imgUrl,expression:"formItem.imgUrl"}]}),t._v(" "),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-trash"},nativeOn:{click:function(e){t.handleDel()}}})],1)]],2),t._v(" "),i("div",{staticStyle:{display:"inline-block"},on:{click:t.uploadImg}},[i("img",{attrs:{src:o(118)}})]),t._v(" "),i("Uploader",{attrs:{show:t.showUploadBox,fileUrl:t.fileUrl},on:{"on-selected":t.handleSuccess,"on-cancel":t.cancelUpload}})],1),t._v(" "),i("Form-item",{attrs:{label:"是否隐藏："}},[[i("i-switch",{attrs:{size:"large"},model:{value:t.formItem.status,callback:function(e){t.formItem.status=e},expression:"formItem.status"}},[i("span",{slot:"open"},[t._v("显示")]),t._v(" "),i("span",{slot:"close"},[t._v("隐藏")])])]],2),t._v(" "),i("Form-item",{staticClass:"form-item",attrs:{label:"链接："}},[i("Select",{attrs:{placeholder:"请输入链接地址（非必填）！"},on:{"on-change":t.changeLink},model:{value:t.formItem.url,callback:function(e){t.formItem.url=e},expression:"formItem.url"}},t._l(t.adver_link,function(e){return i("Option",{key:e,attrs:{value:e.link}},[t._v(t._s(e.text))])})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!!t.goodId,expression:"goodId?true:false"}]},[t._v("\n\t\t\t\t\t 对应选择的商品是：\n\t\t\t\t\t "),i("span",{staticStyle:{color:"red"}},[t._v("\n\t\t\t\t\t \t"+t._s(t.goodInfo&&t.goodInfo.name?t.goodInfo.name:"")+"\t\n\t\t\t\t\t ")]),t._v(" "),i("span",{staticClass:"pointer",staticStyle:{"margin-left":"10px",color:"#39f",cursor:"pointer","font-size":"14px","font-weight":"bold"},on:{click:t.updateGoodsDetail}},[t._v("\n\t\t\t\t\t \t修改\n\t\t\t\t\t \t"),i("Icon",{attrs:{size:"16",type:"settings"}})],1)])],1),t._v(" "),i("Form-item",{staticClass:"form-item",attrs:{label:"排序号："}},[i("Input",{attrs:{placeholder:"请输入排序号"},model:{value:t.formItem.rank,callback:function(e){t.formItem.rank=e},expression:"formItem.rank"}})],1),t._v(" "),i("Form-item",{attrs:{label:""}},[i("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formAdver")}}},[t._v("提交")]),t._v(" "),i("Button",{on:{click:function(e){t.reset("formAdver")}}},[t._v("重置")])],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},65:function(t,e,o){o(558);var i=o(6)(o(261),o(585),null,null);i.options.__file="/Users/yaojiasong/YJSON/boke/vue/pingful-pifa-www/src/pages/home/adver/addAdver.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),i.options.functional,t.exports=i.exports}});