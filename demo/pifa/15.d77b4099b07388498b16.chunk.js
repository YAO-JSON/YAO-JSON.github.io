webpackJsonp([15],{271:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){var e=this;return{slef:this,datagrid:{head:[{title:"订单编号",key:"orderId"},{title:"价格",key:"totalprice"},{title:"申请状态",key:"apply_type",render:function(e){switch(e.apply_type){case 0:return"取消订单";case 1:return"退换货申请";case 2:return"售后申请"}}},{title:"申请理由",key:"content"},{title:"回退理由",key:"back_id"},{title:"审核状态",key:"check_result",render:function(e){switch(e.check_result){case 0:return"审核中";case 1:return"已通过审核";case 2:return"未通过审核"}}},{title:"操作",key:"opt",width:200,render:function(t,r){return t("div",[t("Button",{props:{size:"small",type:"primary"},on:{click:function(){e.throughOrder(r.row)}}},"通过"),t("Button",{props:{size:"small",type:"error"},style:{marginLeft:"5px"},on:{click:function(){e.refusedOrder(r.row)}}},"拒绝"),t("Button",{props:{size:"small",type:"primary"},style:{marginLeft:"5px"},on:{click:function(){e.goDetails(r.row)}}},"详情")])}}],data:[]},model:{isOpen:!1,title:"审核订单",row:null},pagination:{page:0,pageCount:0,pageSize:0,rowCount:0},refue_result:""}},created:function(){this.$bus.emit("updateMainMenuTitle","订单管理"),this.$bus.emit("updateMainMenuActive","3-0"),this.getOrder()},methods:{getOrder:function(e){var t=this,r="/home/order/await_check";e&&(r+="?page="+e),this.fetch(r).then(function(e){if(1==e.data.code){t.pagination=e.data.data.pagination;for(var r=e.data.data.data,a=[],i=0;i<r.length;i++){var n={orderId:r[i].order.orderid,totalprice:r[i].order.totalprice,apply_type:r[i].apply_type,back_id:r[i].back.name,content:r[i].content,check_result:r[i].check_result,id:r[i].id,refue_result:r[i].refue_result,detail:r[i]};a.push(n)}t.datagrid.data=a}})},throughOrder:function(e){var t=this,r={apply_type:e.apply_type,order_id:e.detail.order.id,id:e.id,check_result:1};this.fetch("/home/order/check_order",r).then(function(r){1==r.data.code&&(t.$Message.success("操作成功"),t.datagrid.data.splice(e._index,1))})},refusedOrder:function(e){this.model.isOpen=!0,this.model.title="提示",this.model.row=e},cancal:function(){},ok:function(){var e=this,t=this.model.row,r={apply_type:t.apply_type,order_id:t.detail.order.id,id:t.id,check_result:2,refue_result:this.refue_result};this.fetch("/home/order/check_order",r).then(function(r){1==r.data.code&&(e.$Message.success("操作成功"),e.datagrid.data.splice(t._index,1),e.model.row=null,e.refue_result="")})},changePage:function(e){this.getOrder(e)},goDetails:function(e){this.$router.push({path:"/home/order/detail",query:{id:e.detail.order.id,audit:!0,status:e.status}})}}}},547:function(e,t){},592:function(e,t,r){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Breadcrumb",{staticStyle:{background:"#f8f8f8",padding:"10px 28px"}},[r("Breadcrumb-item",{attrs:{href:"/home/order/index"}},[e._v("订单管理")]),e._v(" "),r("Breadcrumb-item",[e._v("待审核订单")])],1),e._v(" "),r("Row",{staticStyle:{"margin-top":"20px"}},[r("Col",{attrs:{span:"24"}},[r("Modal",{attrs:{width:"400",title:e.model.title},on:{"on-ok":e.ok,"on-cancal":e.cancal},model:{value:e.model.isOpen,callback:function(t){e.model.isOpen=t},expression:"model.isOpen"}},[r("div",{staticStyle:{"margin-left":"30px","margin-bottom":"20px"}},[r("Icon",{attrs:{type:"ios-help",color:"#789789",size:"60"}})],1),e._v(" "),r("Input",{staticStyle:{margin:"10px"},attrs:{autofocus:"",placeholder:"请输入拒绝理由"},model:{value:e.refue_result,callback:function(t){e.refue_result=t},expression:"refue_result"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"24"}},[r("Table",{attrs:{context:e.slef,columns:e.datagrid.head,data:e.datagrid.data}})],1),e._v(" "),r("Col",{attrs:{span:"24"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.datagrid.data.length>0,expression:"datagrid.data.length>0?true:false"}],staticStyle:{margin:"10px 0",overflow:"hidden"}},[r("div",{staticStyle:{float:"right"}},[r("Page",{attrs:{total:e.pagination.rowCount,current:e.pagination.page,"page-size":e.pagination.pageSize},on:{"on-change":e.changePage}})],1)])])],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},75:function(e,t,r){r(547);var a=r(6)(r(271),r(592),null,null);a.options.__file="/Users/yaojiasong/YJSON/boke/vue/pingful-pifa-www/src/pages/home/order/audit.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e}),a.options.functional,e.exports=a.exports}});