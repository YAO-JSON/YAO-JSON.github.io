webpackJsonp([14],{272:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){var e="";switch(t){case-3:e="售后中";break;case-2:e="退款中";break;case-1:e="已关闭";break;case 0:e="待发货";break;case 1:e="已发货";break;case 2:e="已完成";break;case 3:e="已评价";break;case 4:e="退款完成";break;default:e="售后完成"}return e},r=function(t){var e="";switch(t){case 2:e='<span style="color:red;">取消订单审核中</span>';break;case 3:e='<span style="color:red;">退款订单审核中</span>';case 4:e='<span style="color:red;">售后订单审核中</span>'}return e},i=function(t){var e="";switch(t){case 0:e="余额支付";break;case 1:e="微信支付";break;case 2:e="支付宝支付";break;case 3:e="货到付款"}return e};e.default={data:function(){return{self:this,query:{orderId:null,status:null,orderText:null,audit:!1},baseInfo:{headList:[{title:"订单编号",width:150,key:"orderid"},{title:"价格",width:80,key:"totalprice",render:function(t){return"{{row.totalprice}}元"}},{title:"下单时间",width:170,key:"created_at",render:function(t){return"{{format(row.created_at)}}"}},{title:"支付方式",key:"payment_id",render:function(t){return i(t.payment_id)}},{title:"支付状态",key:"pay_status",render:function(t){return 0==t.pay_status?"未支付":1==t.pay_status?"已支付":void 0}},{title:"订单状态",key:"status",align:"center",render:function(t){return r(t.check)||s(t.status)}}],data:[],remarkList:[{title:"订单留言",key:"remark",render:function(t){return""==t.remark?"暂无":"{{row.remark}}"}}],shouList:[{title:"联系人",key:"name"},{title:"联系方式",key:"phone"},{title:"联系地址",key:"address",render:function(t){return"{{row.province}}-{{row.city}}-{{row.district}}-{{row.address}}"}}]},otherInfo:{kuaidi_info:[],order_log:[],productDetail:[]},formItem:{totalprice:"",orderStatus:"",payStatus:0,delivery_code:"",isOpt:!1},orderStatus:[]}},created:function(){this.$bus.emit("updateMainMenuTitle","订单详情"),this.$bus.emit("updateMainMenuActive","3-0");var t=this.$route.query;this.query.orderId=t.id,this.query.status=t.status,t.audit&&(this.query.audit=!0),t.text&&(this.query.orderText=t.text),t.id?this.getOrderById(t.id):this.$Message.error("请联系管理员！")},computed:{isOpt:function(){return!(!this.formItem.isOpt&&!this.query.audit)}},methods:{getOrderById:function(t){var e=this;this.fetch("/home/order/detail?id="+t).then(function(t){if(1==t.data.code&&t.data.data){var a=t.data.data;e.baseInfo.data=[a],e.baseInfo.shouData=[a.contact],e.otherInfo.productDetail=a.detail,a.kuaidi_info.length&&e.kuaidi_info(a.kuaidi_info),a.order_log.length&&e.order_log(a.order_log,a),e.formItem.totalprice=a.totalprice,e.formItem.payStatus=a.pay_status+"",a.delivery_code&&(e.formItem.delivery_code=a.delivery_code);var s=a.status;r(a.check)&&(e.query.audit=!0),-1!=s&&2!=s&&4!=s&&5!=s||(e.formItem.isOpt=!0),e.orderStatus_fun(s),e.formItem.orderStatus=s}else e.$Message.error("数据获取失败，请联系管理员！")})},kuaidi_info:function(t){for(var e=[],a=0;a<t.length;a++){var s=t[a].time.slice(0,10),r=t[a].time.slice(11),i=s.split("-"),o=new Date(i[0],i[1],i[2]).getDay(),n="";switch(o){case 0:n="周日";break;case 1:n="周一";break;case 2:n="周二";break;case 3:n="周三";break;case 4:n="周四";break;case 5:n="周五";break;case 6:n="周六"}var l={context:t[a].context,date:s,time:r,week:n};e[a-1]&&e[a-1].week==n?l.isFirst=!1:l.isFirst=!0,a==t.length-1?l.isLast=!0:l.isLast=!1,e.push(l)}this.otherInfo.kuaidi_info=e},order_log:function(t,e){for(var a=[],s=e.user.user_wxa.nickName,r=e.user.user_wxa.avatarUrl,i=0;i<t.length;i++){var o={};switch(o.time=this.format(t[i].created_at),t[i].apply_type){case 0:o.apply_type="取消订单";break;case 1:o.apply_type="退换货申请";break;case 2:o.apply_type="售后申请"}switch(t[i].check_result){case 0:o.check_result="审核中";break;case 1:o.check_result="已通过审核";break;case 2:o.check_result="未通过审核"}o.content=t[i].content||"其他",o.back=t[i].back?t[i].back.name:"其他",o.user=s,o.imgSrc=r,a.push(o)}this.otherInfo.order_log=a},back:function(){this.$router.go(-1),this.$bus.emit("updateMainMenuTitle","订单管理")},save:function(){var t=this;this.fetch("/home/order/change_status?status="+this.formItem.orderStatus+"&id="+this.query.orderId+"&pay_status="+this.formItem.payStatus+"&delivery_code="+this.formItem.delivery_code).then(function(e){e&&e.data.data&&(t.$router.push("/home/order/index"),t.$bus.emit("updateMainMenuTitle","订单管理"))})},audit:function(){this.$router.push("/home/order/audit")},orderStatus_fun:function(t){var e=s(t);this.orderStatus=[];var a=[];a.push({status:t,name:e}),0==t&&(a.push({status:1,name:"发货"}),a.push({status:-1,name:"取消"})),1==t&&a.push({status:2,name:"完成"}),-2==t&&a.push({status:4,name:"退款完成"}),-3==t&&a.push({status:5,name:"售后完成"}),this.orderStatus=a}}}},556:function(t,e){},582:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Col",{attrs:{span:"24"}},[a("Breadcrumb",{staticStyle:{background:"#f8f8f8",padding:"10px 28px"}},[a("Breadcrumb-item",{attrs:{href:"/home/order/index"}},[t._v("订单管理")]),t._v(" "),a("Breadcrumb-item",{directives:[{name:"show",rawName:"v-show",value:t.query.audit,expression:"query.audit"}],attrs:{href:"/home/order/audit"}},[t._v("待审核订单")]),t._v(" "),a("Breadcrumb-item",[t._v("订单详情")])],1)],1),t._v(" "),a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"order-title"},[t._v("基本信息")]),t._v(" "),a("Table",{attrs:{context:t.self,data:t.baseInfo.data,columns:t.baseInfo.headList}}),t._v(" "),a("Table",{staticStyle:{"margin-top":"10px"},attrs:{context:t.self,columns:t.baseInfo.remarkList,data:t.baseInfo.data}})],1),t._v(" "),a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"order-title"},[t._v(" 收货人信息")]),t._v(" "),a("Table",{attrs:{context:t.self,data:t.baseInfo.shouData,columns:t.baseInfo.shouList}})],1),t._v(" "),a("Col",{directives:[{name:"show",rawName:"v-show",value:t.otherInfo.kuaidi_info.length>0,expression:"otherInfo.kuaidi_info.length>0?true:false"}],attrs:{span:"24"}},[a("div",{staticClass:"order-title"},[t._v("物流信息")]),t._v(" "),a("ul",{staticClass:"status-list"},t._l(t.otherInfo.kuaidi_info,function(e){return a("li",{key:e,class:{latest:e.isLast}},[a("span",{class:["date",{hidden:!e.isFirst}]},[t._v(t._s(e.date))]),t._v(" "),a("span",{class:["week",{hidden:!e.isFirst}]},[t._v(t._s(e.week))]),t._v(" "),a("span",{class:["time"]},[t._v(t._s(e.time))]),t._v(" "),a("span",{class:["text"]},[t._v(t._s(e.context))])])}))]),t._v(" "),a("Col",{directives:[{name:"show",rawName:"v-show",value:t.otherInfo.order_log.length>0,expression:"otherInfo.order_log.length>0?true:false"}],attrs:{span:"24"}},[a("div",{staticClass:"order-title"},[t._v("服务详情")]),t._v(" "),t._l(t.otherInfo.order_log,function(e){return a("div",{staticClass:"clear"},[a("div",{staticClass:"lt img",staticStyle:{padding:"10px"}},[a("img",{staticClass:"imgResponse",attrs:{src:e.imgSrc}})]),t._v(" "),a("ul",{staticClass:"lt info",staticStyle:{padding:"10px",width:"899px",margin:"10px 0"}},[a("li",{staticClass:"clear"},[a("span",{staticClass:"lt"},[t._v("用户："+t._s(e.user))]),t._v(" "),a("span",{staticClass:"rt"},[t._v("时间："+t._s(e.time))])]),t._v(" "),a("li",{staticStyle:{"margin-top":"30px"}},[a("span",[t._v("发起了 "+t._s(e.apply_type))]),t._v(" "),a("span",[t._v("原因："+t._s(e.content))]),t._v(" "),a("span",[t._v("是否通过审核："+t._s(e.check_result))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!e.refue_result,expression:"item.refue_result?true:false"}]},[t._v("拒绝理由："+t._s(e.refue_result))])])])])})],2),t._v(" "),a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"order-title"},[t._v("商品信息")]),t._v(" "),t._l(t.otherInfo.productDetail,function(e){return a("Row",{key:e,staticStyle:{"margin-bottom":"5px"}},[a("Col",{attrs:{span:"2"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getFile(e.product.file),expression:"getFile(item.product.file)"}],staticStyle:{width:"60px",height:"60px","vertical-align":"middle","margin-right":"15px"}})]),t._v(" "),a("Col",{staticStyle:{"text-align":"left","padding-top":"5px"},attrs:{span:"10"}},[a("div",{staticStyle:{display:"inline-block",height:"60px"}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v(t._s(e.name))]),a("br"),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.sku_name,expression:"item.sku_name"}],staticStyle:{color:"rgb(62, 208, 28)","line-height":"25px"}},[t._v("规格:"+t._s(e.sku_name))])])]),t._v(" "),a("Col",{staticStyle:{"text-align":"right","line-height":"50px","padding-right":"20px"},attrs:{span:"12"}},[a("span",[t._v(t._s(e.price)+"元*"+t._s(e.num))])])],1)})],2),t._v(" "),a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"order-title"},[t._v("订单操作")]),t._v(" "),a("Form",{staticStyle:{padding:"0 30px"},attrs:{model:t.formItem,"label-width":80}},[a("Form-item",{attrs:{label:"总价格:"}},[a("Input",{staticStyle:{width:"500px"},attrs:{disabled:!0},model:{value:t.formItem.totalprice,callback:function(e){t.formItem.totalprice=e},expression:"formItem.totalprice"}})],1),t._v(" "),a("Form-item",{attrs:{label:"订单操作:"}},[a("Select",{staticStyle:{width:"500px"},attrs:{disabled:t.isOpt},model:{value:t.formItem.orderStatus,callback:function(e){t.formItem.orderStatus=e},expression:"formItem.orderStatus"}},t._l(t.orderStatus,function(e){return a("Option",{key:e,attrs:{value:e.status}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("Form-item",{attrs:{label:"快递单号:"}},[a("Input",{staticStyle:{width:"500px"},attrs:{disabled:t.isOpt,placeholder:"请输入快递单号！"},model:{value:t.formItem.delivery_code,callback:function(e){t.formItem.delivery_code=e},expression:"formItem.delivery_code"}})],1),t._v(" "),a("Form-item",{attrs:{label:"支付操作:"}},[a("Select",{staticStyle:{width:"500px"},attrs:{disabled:t.isOpt},model:{value:t.formItem.payStatus,callback:function(e){t.formItem.payStatus=e},expression:"formItem.payStatus"}},[a("Option",{key:"0",attrs:{value:"0"}},[t._v("未支付")]),t._v(" "),a("Option",{key:"1",attrs:{value:"1"}},[t._v("已支付")])],1)],1),t._v(" "),a("Form-item",{attrs:{label:""}},[t.query.audit?a("Button",{attrs:{type:"primary"},on:{click:t.audit}},[a("span",{staticStyle:{color:"#fff"}},[t._v("去审核")])]):a("Button",{attrs:{type:"primary",disabled:t.formItem.isOpt},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.back}},[t._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},76:function(t,e,a){a(556);var s=a(6)(a(272),a(582),null,null);s.options.__file="/Users/yaojiasong/YJSON/boke/vue/pingful-pifa-www/src/pages/home/order/detail.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),s.options.functional,t.exports=s.exports}});