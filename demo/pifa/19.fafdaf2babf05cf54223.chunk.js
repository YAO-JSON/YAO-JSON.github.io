webpackJsonp([19],{265:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1);a.default.component("oriItem",{template:'<li>\n\t\t\t<div class="clear">\n\t\t\t\t<div class="lt cursor">\n\t\t\t\t\t<span  v-show="!model.isExpend" v-if="model.type < 3" @click="getLocalData(model)" >\n\t\t\t\t\t\t<Icon type="plus-circled" size="16"  color="#39f" ></Icon>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span  v-show="model.isExpend" v-if="model.type < 3" @click="getLocalData(model)" >\n\t\t\t\t\t\t<Icon type="minus-circled" size="16"  color="#39f" ></Icon>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span style="margin-left:5px" @click="selCity(model)">\n\t\t\t\t\t\t{{model.name}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span v-show="model.isHandler" v-if="model.isHaveRound" class="cursor">\n\t\t\t\t\t\t<Icon type="checkmark-round" color="#f20" ></Icon>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="rt">\n\t\t\t\t\t<span class="rt" v-if="model.select_status">\n\t\t\t\t\t\t<Icon type="ios-checkmark" size="16" color="#f00"></Icon>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ul v-show="model.isExpend">\n\t\t\t\t<ori-item class=\'line line-office\' :model="model" v-for="model in model.areaChildren" :key="model"></ori-item>\n\t\t\t</ul>\n\t\t</li>',data:function(){return{open:!1}},props:{model:Object},methods:{getLocalData:function(t){if(t.areaChildren&&!t.areaChildren.length){var e="/home/location/location/original_region";e+="?id="+t.id+"&name="+t.name,this.fetch(e).then(function(e){if(e.data.code&&e.data.data)for(var n=e.data.data,a=0;a<n.length;a++)t.type<3&&(n[a].type<3&&(n[a].areaChildren=[]),n[a].status=1==n[a].status,n[a].isExpend=!1,n[a].isHandler=!!t.isHandler,n[a].isHaveRound=!0,1==n[a].select_status&&3==n[a].type&&(n[a].isHaveRound=!1),n[a].select_status=1==n[a].select_status,t.areaChildren.push(n[a]))})}t.isExpend=!t.isExpend},selCity:function(t){t.select_status&&t.type>=3||(t.isHandler=!t.isHandler,!t.areaChildren||!t.areaChildren.length)||function t(e,n,a){for(var s=0;s<n.length;s++)n[s].isHandler=e,n[s].type<3&&n[s].areaChildren&&n[s].areaChildren.length&&t(e,n[s].areaChildren,n[s])}(t.isHandler,t.areaChildren)}}}),a.default.component("selItem",{data:function(){return{open:!1}},template:'<li>\n\t\t\t<div class="clear">\n\t\t\t\t<div class="lt cursor">\n\t\t\t\t\t<span  v-show="!model.isExpend" v-if="model.type < 3" @click="getLocalData(model)" >\n\t\t\t\t\t\t<Icon type="plus-circled" size="16"  color="#39f" ></Icon>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span  v-show="model.isExpend" v-if="model.type < 3" @click="getLocalData(model)" >\n\t\t\t\t\t\t<Icon type="minus-circled" size="16"  color="#39f" ></Icon>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span style="margin-left:5px">\n\t\t\t\t\t\t{{model.name}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span v-show="model.isHandler" class="cursor">\n\t\t\t\t\t\t<Icon type="checkmark-round" color="#f20" ></Icon>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="rt">\n\t\t\t\t\t<span class="rt" v-if="model.select_status">\n\t\t\t\t\t\t<Icon type="ios-checkmark" size="16" color="#f00"></Icon>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ul v-show="model.isExpend">\n\t\t\t\t<sel-item class=\'line line-office\' :model="model" v-for="model in model.areaChildren" :key="model"></sel-item>\n\t\t\t</ul>\n\t\t</li>',props:{model:Object},methods:{getLocalData:function(t){if(t.areaChildren&&!t.areaChildren.length){var e="/home/location/location/select_region";e+="?id="+t.id,this.fetch(e).then(function(e){if(e.data.code&&e.data.data)for(var n=e.data.data,a=0;a<n.length;a++)t.type<3&&(n[a].type<3&&(n[a].areaChildren=[]),n[a].status=1==n[a].status,n[a].isExpend=!1,n[a].isListExpend=!1,n[a].isHandler=!!t.isHandler,n[a].select_status=1==n[a].select_status,t.areaChildren.push(n[a]))})}t.isExpend=!t.isExpend}}}),a.default.component("item",{data:function(){return{open:!1}},template:'\n\t\t\t<li class="line">\n\t\t\t\t<div class="clear border-bottom">\n\t\t\t\t\t<div class="lt">\n\t\t\t\t\t\t<span @click="expendChildList(model)" v-show="!model.isListExpend" v-if="model.type < 3" class="cursor">\n\t\t\t\t\t\t\t<Icon type="plus-circled" size="16"  color="#39f" ></Icon>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span @click="expendChildList(model)" v-show="model.isListExpend" v-if="model.type < 3" class="cursor">\n\t\t\t\t\t\t\t<Icon type="minus-circled" size="16"  color="#39f" ></Icon>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span style="margin-left:5px">\n\t\t\t\t\t\t\t{{model.name}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="rt">\n\t\t\t\t\t\t<i-switch v-model="model.status" @on-change="openOrCloseLoaction(model)"></i-switch>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<ul v-show="model.isListExpend">\n\t\t\t\t\t<item v-for="model in model.areaChildren" :model="model" class="line" :key="model"></item>\n\t\t\t\t</ul>\n\t\t\t</li>\t\n\t\t',props:{model:Object},methods:{expendChildList:function(t){if(t.areaChildren&&!t.areaChildren.length){var e="/home/location/location/select_region";e+="?id="+t.id,this.fetch(e).then(function(e){if(e.data.code&&e.data.data)for(var n=e.data.data,a=0;a<n.length;a++)t.type<3&&(n[a].type<3&&(n[a].areaChildren=[]),n[a].status=1==n[a].status,n[a].isExpend=!1,n[a].isListExpend=!1,n[a].isHandler=!!t.isHandler,n[a].select_status=1==n[a].select_status,t.areaChildren.push(n[a]))})}t.isListExpend=!t.isListExpend},openOrCloseLoaction:function(t){var e=this,n=t.id,a=t.status?1:0;1==t.type?(t.areaChildren&&t.areaChildren.length&&function t(e,n){for(var a=0;a<e.length;a++)e[a].status=n,e[a].areaChildren&&e[a].areaChildren.length&&t(e[a].areaChildren,n)}(t.areaChildren,t.status),this.fetch("/home/location/location/close_location?id="+n+"&status="+a).then(function(t){t&&1==t.data.code&&e.$Message.success(t.data.data)})):this.$root.eventHub.$emit("getChangeModel",t)}}}),e.default={data:function(){return{localTitle:"点击右边",isAddDistribtion:!1,selLoaclData:[],isOpened:!1,selLoaclRegion:[],region:[],self:this,changeModel:null}},created:function(){var t=this;this.$bus.emit("updateMainMenuTitle","插件管理"),this.$bus.emit("updateMainMenuActive","5-0"),this.$root.eventHub.$on("getChangeModel",function(e){t.changeModel=e}),this.createdCommpant()},watch:{selLoaclData:{deep:!0,handler:function(t,e){function n(t,e){var n=this;this.fetch("/home/location/location/close_location?id="+t+"&status="+e).then(function(t){t&&1==t.data.code&&n.$Message.success(t.data.data)})}t.length>0&&(this.localTitle="全部模板");var a=this.changeModel;if(a){var s=a.type,i=a.pid,l=a.status?1:0,o=void 0,d=void 0,r=a.id;if(n.apply(this,[r,l]),2==s){o=function(t,e){for(var n=0;n<e.length;n++)if(e[n].id==t)return e[n]}(i,t);var c=o.areaChildren.some(function(t){return 1==t.status});if(a.areaChildren.length>0)for(var u=0;u<a.areaChildren.length;u++)a.areaChildren[u].status=a.status;c?o.status||(o.status=!0):o.status&&(o.status=!1,n.apply(this,[o.id,0]))}if(3==s){for(var h=0;h<t.length;h++)for(var p=0;p<t[h].areaChildren.length;p++)if(t[h].areaChildren[p].id==i){d=t[h],o=t[h].areaChildren[p];break}o.areaChildren.some(function(t){return 1==t.status})?o.status=!0:(o.status=!1,n.apply(this,[o.id,0])),d.areaChildren.some(function(t){return 1==t.status})?d.status||(d.status=!0):d.status&&(d.status=!1,n.apply(this,[d.id,0]))}this.changeModel=null}}},region:{deep:!0,handler:function(t,e){function n(t,e){for(var a=0;a<e.length;a++)e[a].areaChildren&&e[a].areaChildren.length&&n(e[a],e[a].areaChildren);t.isHandler=e.some(function(t){return t.isHandler})}for(var a=0;a<t.length;a++)t[a].areaChildren&&t[a].areaChildren.length&&n(t[a],t[a].areaChildren)}}},methods:{createdCommpant:function(t){var e=this;this.isOpened&&!t||(this.region=[],this.selLoaclData=[],this.fetch("/home/location/location/add").then(function(t){if(1==t.data.code&&t.data.data){for(var n=t.data.data.region,a=0;a<n.length;a++)n[a].type<3&&(n[a].areaChildren=[],n[a].status=1==n[a].status,n[a].isExpend=!1,n[a].isHandler=!1,n[a].isHaveRound=!0,1==n[a].select_status&&3==n[a].type&&(n[a].isHaveRound=!1),n[a].select_status=1==n[a].select_status,e.region.push(n[a]));for(var s=t.data.data.selected_region,i=0;i<s.length;i++)s[i].type<3&&(s[i].areaChildren=[],s[i].status=1==s[i].status,s[i].isExpend=!1,s[i].isListExpend=!1,e.selLoaclData.push(s[i]))}}),this.isOpened=!this.isOpened)},addDistribtion:function(){this.isAddDistribtion=!this.isAddDistribtion},modelOk:function(){},modelCancal:function(){},addSelLocal:function(){function t(e,n){for(var a=0;a<n.length;a++)if(n[a].isHandler){var s={name:n[a].name,type:n[a].type,region_id:n[a].id,isAdded:n[a].select_status};n[a].areaChildren?(0==n[a].areaChildren.length?s.ful=1:(s.child=[],s.ful=0,t(s.child,n[a].areaChildren)),e.push(s)):n[a].select_status||e.push(s)}}var e=this,n=this.region,a=[];if(t(a,n),!a.length)return void this.$Message.error("请选择地址！");this.fetch("/home/location/location/add",{data:a}).then(function(t){1==t.data.code&&(e.$Message.success("设置成功"),e.createdCommpant(!0))})}}}},560:function(t,e){},599:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Modal",{attrs:{title:"选择可配送区域"},on:{"on-ok":t.modelOk,"on-cancal":t.modelCancal},model:{value:t.isAddDistribtion,callback:function(e){t.isAddDistribtion=e},expression:"isAddDistribtion"}},[n("div",[n("Row",[n("Col",{staticStyle:{color:"#fff"},attrs:{span:"2"}},[t._v("\n\t\t\t\t\t\tnia\n\t\t\t\t\t")]),t._v(" "),n("Col",{attrs:{span:"20"}},[n("Row",[n("Col",{staticStyle:{border:"1px solid #ddd"},attrs:{span:"8"}},[n("div",{staticClass:"selProce"},[t._v("\n\t\t\t\t\t\t\t\t\t可选省、市、区\n\t\t\t\t\t\t\t\t")]),t._v(" "),n("ul",{staticClass:"ul-500"},t._l(t.region,function(t){return n("ori-item",{key:t,staticClass:"line line-office cursor",attrs:{model:t}})}))]),t._v(" "),n("Col",{attrs:{span:"8"}},[n("div",{staticStyle:{"text-align":"center","line-height":"400px"}},[n("Button",{attrs:{type:"primary"},on:{click:t.addSelLocal}},[t._v("添加")])],1)]),t._v(" "),n("Col",{staticStyle:{border:"1px solid #ddd"},attrs:{span:"8"}},[n("div",{staticClass:"selProce"},[t._v("\n\t\t\t\t\t\t\t\t\t已选中的省、市、区\n\t\t\t\t\t\t\t\t")]),t._v(" "),n("ul",{staticClass:"ul-500"},t._l(t.selLoaclData,function(t){return n("sel-item",{key:t,staticClass:"line line-office cursor",attrs:{model:t}})}))])],1)],1),t._v(" "),n("Col",{staticStyle:{color:"#fff"},attrs:{span:"2"}},[t._v("\n\t\t\t\t\t\tni\n\t\t\t\t\t")])],1)],1)]),t._v(" "),n("Row",[n("Col",{staticClass:"line",attrs:{span:"24"}},[n("div",[n("Icon",{staticStyle:{"margin-right":"10px","margin-left":"10px"},attrs:{type:"document-text",size:"18"}}),t._v(" "),n("span",{staticStyle:{"font-size":"16px"}},[t._v("地址管理")])],1)]),t._v(" "),n("Col",{staticClass:"line",attrs:{span:"24"}},[n("div",{staticClass:"lt"},[n("Icon",{staticStyle:{"margin-right":"10px","padding-left":"25px"},attrs:{type:"ios-list-outline",size:"16"}}),t._v(" "),n("span",{staticStyle:{"font-size":"14px"}},[t._v("\n                \t\t"+t._s(t.localTitle)+"\n                \t")])],1),t._v(" "),n("div",{staticClass:"rt"},[n("Button",{attrs:{type:"primary"},on:{click:t.addDistribtion}},[t._v("新增配送地址")])],1)])],1),t._v(" "),n("Row",[n("Col",[n("ul",{staticStyle:{"padding-left":"25px"}},t._l(t.selLoaclData,function(t){return n("item",{key:t,staticClass:"line",attrs:{model:t}})}))])],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},68:function(t,e,n){n(560);var a=n(6)(n(265),n(599),null,null);a.options.__file="/Users/yaojiasong/YJSON/boke/vue/pingful-pifa-www/src/pages/home/config/location.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),a.options.functional,t.exports=a.exports}});