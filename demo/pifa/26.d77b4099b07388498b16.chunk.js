webpackJsonp([26],{253:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{status:"-1",value:"",self:this,couponData:[],couponList:[{title:"优惠券",key:"name",render:function(t){return t.name+"<br><span style='color:red;'>¥"+t.price+"</span>"}},{title:"状态",key:"status",width:250,render:function(t){return"<div style='margin:10px 0;'><span style='font-size:14px;' v-show='row.status==-1'>已失效</span><span style='font-size:14px;' v-show='row.status==0'>关闭</span><span style='font-size:14px;' v-show='row.status==1'>开启</span><br><span>开始时间:{{format(row.start_time)}}</span><br><span>结束时间:{{format(row.last_time)}}</span></div>"}},{title:"库存(张)",key:"num",width:100,render:function(t){return"<div style='text-align:left;'><span>总数："+t.num+"</span><br><span>已领："+t.has_received+"</span><br><span>剩余："+(t.num-t.has_received)+"</span></div>"}},{title:"规则",key:"rule",render:function(t){return"<div v-if='row.get_num==\"0\"||row.get_num==row.num'>无领取限制</div>\n                                    <div v-else>每人限领"+t.get_num+"张</div>\n                                    <div>订单满"+t.use_price+"元可用</div>"}},{title:"操作",key:"action",align:"center",render:function(t,a,e){return'<i-button type=\'text\' size="small" v-show=\'row.status==-1\'>已失效</i-button> <i-button size="small" @click="edit(row)" v-show=\'row.status!=-1\'>编辑</i-button> <i-button size="small" @click="invalid(row)" v-show=\'row.status==1\'>关闭</i-button> <i-button size="small" @click="invalid(row)" v-show=\'row.status==0\'>开启</i-button>'}}],pagination:[],activityStatus:"",currentPage:1}},created:function(){this.getCoupon(),this.$bus.emit("updateMainMenuTitle","插件管理"),this.$bus.emit("updateMainMenuActive","5-0")},methods:{getCoupon:function(){var t=this;this.fetch("/home/coupon/index/index").then(function(a){a&&a.data.code&&(t.couponData=a.data.data.data,t.pagination=a.data.data.pagination)})},addCoupon:function(){this.$router.push({path:"/home/addons/edit",query:{pageName:"新增优惠券"}})},edit:function(t){this.$router.push({path:"/home/addons/edit",query:{id:t.id,pageName:"编辑优惠券"}})},invalid:function(t){var a=this;0==t.status&&(this.activityStatus=1),1==t.status&&(this.activityStatus=0),this.fetch("/home/coupon/index/change?id="+t.id+"&status="+this.activityStatus).then(function(t){t&&t.data.code&&a.paginations()})},search:function(){var t=this;-1==this.status&&(this.status=""),this.fetch("/home/coupon/index/search_coupon?keyword="+this.value+"&status="+this.status).then(function(a){a&&a.data.code&&(t.couponData=a.data.data,t.pagination=[],""==t.status&&(t.status=-1))})},changePage:function(t){this.currentPage=t,this.paginations()},paginations:function(){var t=this;this.fetch("/home/coupon/index/index?page="+this.currentPage).then(function(a){a&&a.data.code&&(t.couponData=a.data.data.data,t.pagination=a.data.data.pagination)})}}}},57:function(t,a,e){var n=e(6)(e(253),e(586),null,null);n.options.__file="/Users/yaojiasong/YJSON/boke/vue/pingful-pifa-www/src/pages/home/addons/coupon.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),n.options.functional,t.exports=n.exports},586:function(t,a,e){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{"padding-bottom":"200px"}},[e("Breadcrumb",{staticStyle:{background:"#f8f8f8",padding:"10px 28px"}},[e("Breadcrumb-item",{attrs:{href:"/home/addons/index"}},[t._v("插件管理")]),t._v(" "),e("Breadcrumb-item",[t._v("优惠券")])],1),t._v(" "),e("div",{staticStyle:{padding:"20px 28px","font-size":"18px","border-bottom":"1px solid #eee"}},[t._v("优惠券")]),t._v(" "),e("Row",{staticStyle:{padding:"15px 25px"}},[e("Col",[e("div",{staticStyle:{float:"left"}},[e("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:t.addCoupon}},[t._v("新增优惠券")])],1),t._v(" "),e("div",{staticStyle:{float:"right"}},[e("Select",{staticStyle:{width:"180px","margin-right":"10px"},model:{value:t.status,callback:function(a){t.status=a},expression:"status"}},[e("Option",{key:"-1",attrs:{value:"-1"}},[t._v("所有状态")]),t._v(" "),e("Option",{key:"0",attrs:{value:"0"}},[t._v("关闭")]),t._v(" "),e("Option",{key:"1",attrs:{value:"1"}},[t._v("开启")])],1),t._v(" "),e("Input",{staticStyle:{width:"180px"},attrs:{placeholder:"搜索优惠券"},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}}),t._v(" "),e("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1)])],1),t._v(" "),e("Row",{staticStyle:{padding:"10px 25px"}},[e("Col",[e("Table",{attrs:{context:t.self,data:t.couponData,columns:t.couponList,stripe:""}}),t._v(" "),e("div",{staticStyle:{margin:"10px 0",overflow:"hidden"}},[e("div",{staticStyle:{float:"right"}},[e("Page",{attrs:{total:t.pagination.rowCount,current:t.pagination.page,"page-size":t.pagination.pageSize},on:{"on-change":t.changePage}})],1)])],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});