webpackJsonp([8],{173:function(t,e){t.exports="data:image/gif;base64,R0lGODdhyACWAOMAAO/v76qqqubm5t3d3bu7u7KystXV1cPDw8zMzAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAyACWAAAE/hDISau9OOvNu/9gKI5kaZ5oqq5s675wLM90bd94ru987//AoHBILBqPyKRyyWw6n9CodEqtWq/YrHbL7Xq/4LB4TC6bz+i0es1uu9/wuHxOr9vv+Lx+z+/7/4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3TAMFBQO4LAUBAQW+K8DCxCoGu73IzSUCwQECAwQBBAIVCMAFCBrRxwDQwQLKvOHV1xbUwQfYEwIHwO3BBBTawu2BA9HGwcMT1b7Vw/Dt3z563xAIrHCQnzsAAf0F6ybhwDdwgAx8OxDQgASN/sKUBWNmwQDIfwBAThRoMYDHCRYJGAhI8eRMf+4OFrgZgCKgaB4PHqg4EoBQbxgBROtlrJu4ofYm0JMQkJk/mOMkTA10Vas1CcakJrXQ1eu/sF4HWhB3NphYlNsmxOWKsWtZtASTdsVb1mhEu3UDX3RLFyVguITzolQKji/GhgXNvhU7OICgsoflJr7Qd2/isgEPGGAruTTjnSZTXw7c1rJpznobf2Y9GYBjxIsJYQbXstfRDJ1luz6t2TDvosSJSpMw4GXG3TtT+hPpEoPJ6R89B7AaUrnolgWwnUQQEKVOAy199mlonPDfr3m/GeUHFjBhAf0SUh28+P12QOIIgDbcPdwgJV+Arf0jnwTwsHOQT/Hs1BcABObjDAcTXhiCOGppKAJI6nnIwQGiKZSViB2YqB+KHtxjjXMsxijjjDTWaOONOOao44489ujjj0AGKeSQRBZp5JFIJqnkkkw26eSTUEYp5ZRUVmnllVhmqeWWXHbp5ZdghinmmGSW6UsEADs="},276:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(4),o=i.n(a),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={data:function(){return{self:this,searchGoodText:"",pagination:{},productData:[],productList:[{type:"selection",width:60},{title:"图片",key:"img",width:140,render:function(t,e,a){var o=i(173);return t.img=o,t.file.id?"<img v-lazy='getFile(row.file)' style='width:80px;height:60px;margin:10px;'>":"<img v-lazy='row.img' style='width:80px;height:60px;margin:10px;'>"}},{title:"名称",key:"name"},{title:"菜单",key:"menu",render:function(t){return t.menu.name||" "}},{title:"价格(元)",key:"price"},{title:"库存",key:"store"},{title:"是否推荐",key:"is_recommend",render:function(t){return'<span>{{row.is_recommend ? "是" : "否"}}</span>'}},{title:"商品状态",key:"status",render:function(t){return 0==t.status?"关闭":"开启"}},{title:"SKU状态",key:"sku",render:function(t){return t.sku_status?"开启":"关闭"}},{title:"销量",key:"sales"},{title:"操作",key:"action",width:120,render:function(t,e,i){return'\n                            <i-button size="small" type=\'primary\' @click="isshow(row)" v-show=\'row.status==1\'>下架</i-button> <i-button type=\'primary\' size="small" @click="isshow(row)" v-show=\'row.status==0\'>上架</i-button> <i-button type=\'primary\' size="small" @click="edit(row)">编辑</i-button>'}}],value:"",currentPage:1,selectId:"",menuList:[],tabId:"",state:"",grouping:!1,selectedId:"",menu:"",ids:[],isgroup:!1,menus:"",disabled:!0,position:"bottom"}},created:function(){var t=this;this.fetch("/home/menu/index").then(function(e){e&&e.data.data.length>0&&(t.menuList=e.data.data,t.$nextTick(function(){t.tabId=t.menuList[0].id,t.getProduct()}))})},methods:{getProduct:function(){var t=this;this.fetch("/home/product/index?category_id="+this.tabId).then(function(e){1==e.data.code&&e.data.data&&(t.productData=e.data.data.data,t.pagination=e.data.data.pagination)})},selectTab:function(t){this.tabId=t,this.getProduct()},addGoods:function(){this.$router.push("/home/shop/add")},isshow:function(t){var e=this;0==t.status&&(this.state=1),1==t.status&&(this.state=0),this.fetch("/home/product/change?id="+t.id+"&status="+this.state).then(function(t){t&&t.data.data&&e.getProduct()})},group:function(t,e,i){var a=this;this.grouping=!0,this.selectedId=t.id,this.menu=this.tabId,this.productData.forEach(function(t,e){i==e&&(a.position="top")})},handleClose:function(t){var e=this;this.grouping=!1,this.tabId=this.menu,this.fetch("/home/product/change?id="+t.id+"&category_id="+this.menu).then(function(t){t&&t.data.data&&e.getProduct()})},handleCancel:function(){this.grouping=!1},selectionChange:function(t){this.ids=[];for(var e in t)this.ids.push(t[e].id);this.ids.length>0?this.disabled=!1:this.disabled=!0},up:function(){var t=this;this.fetch("/home/product/changeAll?status=1&id="+this.ids.join(",")).then(function(e){e&&e.data.data&&(t.getProduct(),t.disabled=!0)})},down:function(){var t=this;this.fetch("/home/product/changeAll?status=0&id="+this.ids.join(",")).then(function(e){e&&e.data.data&&(t.getProduct(),t.disabled=!0)})},changeGroup:function(){var t=[];if(this.ids.length)t=this.ids;else for(var e=0;e<this.productData.length;e++)t.push(this.productData[e].id);var i=["Authorization="+o.a.defaults.headers.common.Authorization,"WxaToken="+o.a.defaults.headers.common.WxaToken];if(!t.join(""))return void this.$Message.info("没有相应的商品！");i.push("ids="+t.join(",")),window.open(o.a.defaults.baseURL+"/home/product/export?"+i.join("&"))},sureGroup:function(){var t=this;this.isgroup=!1,this.tabId=this.menus,this.fetch("/home/product/changeAll?category_id="+this.menus+"&id="+this.ids.join(",")).then(function(e){e&&e.data.data&&(t.getProduct(),t.disabled=!0)})},cancelGroup:function(){this.isgroup=!1},edit:function(t){this.$router.push({path:"/home/shop/add",query:{id:t.id}})},changePage:function(t){this.currentPage=t,this.paginations()},paginations:function(){var t=this;this.fetch("/home/product/index?page="+this.currentPage+"&category_id="+this.tabId).then(function(e){e&&e.data.data&&(t.productData=e.data.data.data,t.pagination=e.data.data.pagination)})},getPosition:function(t){if(t>=3)return t==this.productData.length-1||t==this.productData.length-2?"top":"bottom"},searchGood:function(t){var e=this;if(void 0===(void 0===t?"undefined":n(t)))return void this.$Message.error("请输入商品名称");this.fetch("home/product/search_product?keyword="+t).then(function(t){t&&1==t.data.code&&t.data.data.length?e.productData=t.data.data:e.$Message.error("没有找到相关数据！")})}}}},539:function(t,e){},576:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"padding-bottom":"300px"}},[i("Row",{staticStyle:{background:"#f8f8f8",padding:"10px 20px","margin-bottom":"10px"}},[i("Col",{attrs:{span:"24"}},[i("div",[i("Button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("添加商品")]),t._v(" "),i("Button",{attrs:{type:"primary",disabled:t.disabled},on:{click:t.up}},[t._v("上架")]),t._v(" "),i("Button",{attrs:{type:"primary",disabled:t.disabled},on:{click:t.down}},[t._v("下架")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.changeGroup}},[t._v("导出")]),t._v(" "),i("Input",{staticStyle:{width:"300px","margin-left":"15px"},attrs:{placeholder:"请输入商品名称",icon:"ios-search"},on:{"on-enter":function(e){t.searchGood(t.searchGoodText)},"on-click":function(e){t.searchGood(t.searchGoodText)}},model:{value:t.searchGoodText,callback:function(e){t.searchGoodText=e},expression:"searchGoodText"}})],1)])],1),t._v(" "),i("Row",{directives:[{name:"show",rawName:"v-show",value:t.menuList.length>0,expression:"menuList.length>0"}],staticStyle:{border:"1px solid #d7dde4",overflow:"hidden","min-height":"500px",position:"relative"}},[i("i-col",{attrs:{span:"24"}},[t.productData.length>0?i("Table",{attrs:{context:t.self,data:t.productData,columns:t.productList,stripe:""},on:{"on-selection-change":t.selectionChange}}):i("p",{staticStyle:{"text-align":"center","line-height":"200px"}},[t._v("暂无商品")])],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.menuList.length,expression:"menuList.length===0"}],staticStyle:{"text-align":"center",border:"1px solid #d7dde4","line-height":"200px","min-height":"500px","font-size":"18px"}},[i("Icon",{staticStyle:{"vertical-align":"middle","margin-right":"10px"},attrs:{type:"happy-outline"}}),t._v(" "),i("span",[t._v("请先添加菜单")])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.productData.length>0,expression:"productData.length>0"}],staticStyle:{margin:"10px 0",overflow:"hidden"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{attrs:{total:t.pagination.rowCount,current:t.pagination.page,"page-size":t.pagination.pageSize},on:{"on-change":t.changePage}})],1)])],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},80:function(t,e,i){i(539);var a=i(6)(i(276),i(576),"data-v-09786436",null);a.options.__file="/Users/yaojiasong/YJSON/boke/vue/pingful-pifa-www/src/pages/home/shop/goods.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),a.options.functional,t.exports=a.exports}});